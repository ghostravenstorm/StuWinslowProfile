<!doctype html>
<html>
    <head>
    <meta charset="UTF-8">
    <title>DOTS TEST</title>
        <style>
        </style>
    </head>

    <body>
        <canvas id='myCanvas' width="500" height="500">
        </canvas>
        
        <script src='perlin.js'></script>
        <script src='shapes5.js'></script>
        
        <script>
            
            var c = createCanvas('myCanvas');
            var numOfDots = 100;

            //calculates the distance between two ponts
            function dist(x1, y1, x2, y2){
            	this.x1 = x1;
            	this.x2 = x2;
            	this.y1 = y1;
            	this.y2 = y2;
            	return Math.sqrt( (Math.pow( x2 - x1, 2)) + (Math.pow( y2 - y1, 2)) );
            }

            // circle class
            function Dot(xPos, yPos, size, speedX, speedY, maxDist){
            	this.xPos = xPos;
            	this.yPos = yPos;
            	this.size = size;
            	this.speedX = speedX;
            	this.speedY = speedY;
            	this.maxDist = maxDist;

            	var offsetX = 0;
            	var offsetY = 0;

            	var fill = 255;

            	
            	// function that draws the circles
            	this.draw = (function draw(){
            		fill = (dist(c.mouseX, c.mouseY, xPos, yPos) / 255) * 300;
            		c.setFillColor( fill, fill, fill, 255 );
            		c.circle(xPos, yPos, size, size);
            		
            		
            	});

            	//function that gives the circles movement
            	this.move = (function move(){
         			offsetX += speedX;
         			if(offsetX >= maxDist)    speedX *= -1;
         			if(offsetX <= maxDist*-1) speedX *= -1;

         			offsetY += speedY;
         			if(offsetY >= maxDist)    speedY *= -1;
         			if(offsetY <= maxDist*-1) speedY *= -1;

         			xPos += offsetX;
         			yPos += offsetY;
		     	});
		     }
            

            // array that holds all the circles
            var dots = new Array(numOfDots);

            // loop that creates the circles for the array
            for(i = 0; i < dots.length; i++){

            	dots[i] = new Dot(   Math.random()*500, // x
            		                 Math.random()*500, // y
            		              10+Math.random()*30,  // size
            		               2-Math.random()*4,   // speed x
            		               2-Math.random()*4,   // speed y
            		              20-Math.random()*40  // move dist
            		              );

            	//console.log("Created a new dot at " + dots[i].xPos + ", " + dots[i].yPos);
            }



			
			
			c.setBackgroundColor(0,0,0,255);
			
			c.draw = function(){
				c.clear();
				
				//loop that gives the dots from the array commands
				//call dot class functions here
				for(i = 0; i < dots.length; i++){
					dots[i].draw();   
					dots[i].move();
				}


			}
        </script>
    </body>
</html>

